<!-- templates/fragments/event_cards.html -->

<!-- Card "banner" per evidenza (stile uguale a Eventi) -->
<div th:fragment="event_banner(e)">
    <article class="event-card h-100 shadow-sm">
        <a th:href="@{|/eventi/${e.id}|}" class="ratio ratio-16x9 event-thumb-link"
            th:aria-label="${'Vai a ' + e.titolo}">
            <img class="event-thumb" th:if="${e.imageUrl != null and !#strings.isEmpty(e.imageUrl)}"
                th:src="${e.imageUrl}" th:alt="${e.titolo}">
            <div class="event-thumb placeholder" th:if="${e.imageUrl == null or #strings.isEmpty(e.imageUrl)}">
                <i class="bi bi-image"></i>
            </div>
        </a>

        <div class="p-3 d-flex flex-column">
            <div class="d-flex align-items-start justify-content-between gap-2 mb-2">
                <h3 class="h5 mb-0">
                    <a th:href="@{|/eventi/${e.id}|}" th:text="${e.titolo}">Titolo evento</a>
                </h3>
                <span class="badge text-bg-dark-subtle border fw-normal" th:text="${e.categoria}">Categoria</span>
            </div>

            <ul class="list-unstyled small text-muted mb-3">
                <li><i class="bi bi-geo-alt"></i> <span th:text="${e.citta}">Città</span></li>
                <li><i class="bi bi-calendar-event"></i>
                    <span th:text="${#temporals.format(e.dataOra, 'EEEE d MMMM yyyy, HH:mm', #locale)}">data</span>
                </li>
                <li th:if="${e.indirizzo != null and !#strings.isEmpty(e.indirizzo)}">
                    <i class="bi bi-pin-map"></i> <span th:text="${e.indirizzo}">Indirizzo</span>
                </li>
            </ul>

            <div class="mt-auto d-flex align-items-center justify-content-between">
                <div class="price fw-semibold">
                    <span th:if="${e.prezzo == 0.0}">Gratuito</span>
                    <span th:if="${e.prezzo != 0.0}">
                        <i class="bi bi-currency-euro"></i>
                        <span th:text="${#numbers.formatDecimal(e.prezzo, 1, 'COMMA', 2, 'POINT')}">0,00</span>
                    </span>
                </div>
                <a class="btn btn-outline-dark btn-sm" th:href="@{|/eventi/${e.id}|}">
                    Dettagli <i class="bi bi-arrow-right-short"></i>
                </a>
            </div>
        </div>
    </article>
</div>

<!-- Card “compatta” (stesso stile; cambia solo la gerarchia del titolo) -->
<div th:fragment="event_card(e)">
    <article class="event-card h-100 shadow-sm">
        <a th:href="@{|/eventi/${e.id}|}" class="ratio ratio-16x9 event-thumb-link"
            th:aria-label="${'Vai a ' + e.titolo}">
            <img class="event-thumb" th:if="${e.imageUrl != null and !#strings.isEmpty(e.imageUrl)}"
                th:src="${e.imageUrl}" th:alt="${e.titolo}">
            <div class="event-thumb placeholder" th:if="${e.imageUrl == null or #strings.isEmpty(e.imageUrl)}">
                <i class="bi bi-image"></i>
            </div>
        </a>

        <div class="p-3 d-flex flex-column">
            <div class="d-flex align-items-start justify-content-between gap-2 mb-2">
                <h4 class="h5 mb-0">
                    <a th:href="@{|/eventi/${e.id}|}" th:text="${e.titolo}">Titolo evento</a>
                </h4>
                <span class="badge text-bg-dark-subtle border fw-normal" th:text="${e.categoria}">Categoria</span>
            </div>

            <ul class="list-unstyled small text-muted mb-3">
                <li><i class="bi bi-geo-alt"></i> <span th:text="${e.citta}">Città</span></li>
                <li><i class="bi bi-calendar-event"></i>
                    <span th:text="${#temporals.format(e.dataOra, 'EEEE d MMMM yyyy, HH:mm', #locale)}">data</span>
                </li>
                <li th:if="${e.indirizzo != null and !#strings.isEmpty(e.indirizzo)}">
                    <i class="bi bi-pin-map"></i> <span th:text="${e.indirizzo}">Indirizzo</span>
                </li>
            </ul>

            <div class="mt-auto d-flex align-items-center justify-content-between">
                <div class="price fw-semibold">
                    <span th:if="${e.prezzo == 0.0}">Gratuito</span>
                    <span th:if="${e.prezzo != 0.0}">
                        <i class="bi bi-currency-euro"></i>
                        <span th:text="${#numbers.formatDecimal(e.prezzo, 1, 'COMMA', 2, 'POINT')}">0,00</span>
                    </span>
                </div>
                <a class="btn btn-outline-dark btn-sm" th:href="@{|/eventi/${e.id}|}">
                    Dettagli <i class="bi bi-arrow-right-short"></i>
                </a>
            </div>
        </div>
    </article>
</div>