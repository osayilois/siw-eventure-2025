<!-- src/main/resources/templates/eventi.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">

<head>
  <meta charset="UTF-8">
  <title>Eventure – Eventi</title>

  <!-- CSS globali -->
  <link rel="stylesheet" th:href="@{/css/footer.css}">
  <link rel="stylesheet" th:href="@{/css/fonts.css}">


  <!-- Bootstrap 5 (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    crossorigin="anonymous">

  <!-- Bootstrap Icons (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Font della home (sostituisci con quello che usi tu se diverso) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">


  <!-- Stile pagina eventi -->
  <link rel="stylesheet" th:href="@{/css/eventi.css}">
</head>


<body class="eventi-page">

  <!-- Header condiviso -->
  <a th:href="@{/}">Eventure</a>



  <main class="container py-4">
    <!-- Barra di ricerca -->
    <section class="searchbar card shadow-sm mb-4">
      <div class="card-body">
        <form class="row g-2 align-items-center" th:action="@{/eventi}" method="get">
          <div class="col-12 col-md">
            <label for="q" class="visually-hidden">Cerca per nome</label>
            <input id="q" name="q" type="search" class="form-control form-control-lg"
              placeholder="Cerca evento per nome…" th:value="${q}">
          </div>
          <div class="col-12 col-md-auto d-flex gap-2">
            <button class="btn btn-dark btn-lg" type="submit">
              <i class="bi bi-search"></i> Cerca
            </button>
            <a class="btn btn-outline-secondary btn-lg" th:href="@{/eventi}">
              <i class="bi bi-x-circle"></i> Pulisci
            </a>
          </div>
        </form>
      </div>
    </section>

    <!-- Titolo pagina -->
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h1 class="page-title m-0">Tutti gli eventi</h1>
      <a class="link-secondary fw-semibold" th:href="@{/}">
        <i class="bi bi-house-door"></i> Home
      </a>
    </div>

    <!-- Griglia card eventi -->
    <section>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4">
        <div class="col" th:each="e : ${eventi}">
          <article class="card event-card h-100 shadow-sm">
            <!-- Immagine -->
            <a th:href="@{|/eventi/${e.id}|}" class="ratio ratio-16x9 event-thumb-link">
              <img class="card-img-top event-thumb" th:if="${e.imageUrl != null and !#strings.isEmpty(e.imageUrl)}"
                th:src="${e.imageUrl}" alt="">
              <div class="card-img-top event-thumb placeholder"
                th:if="${e.imageUrl == null or #strings.isEmpty(e.imageUrl)}">
                <i class="bi bi-image"></i>
              </div>
            </a>

            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-start justify-content-between gap-2 mb-2">
                <h2 class="h5 card-title mb-0">
                  <a th:href="@{|/eventi/${e.id}|}" th:text="${e.titolo}">Titolo evento</a>
                </h2>
                <span class="badge text-bg-dark-subtle border fw-normal" th:text="${e.categoria}">Categoria</span>
              </div>

              <ul class="list-unstyled small text-muted mb-3">
                <li><i class="bi bi-geo-alt"></i> <span th:text="${e.citta}">Città</span></li>
                <li><i class="bi bi-calendar-event"></i>
                  <span th:text="${#temporals.format(e.dataOra, 'EEEE d MMMM yyyy, HH:mm', #locale)}">data</span>
                </li>
                <li th:if="${e.indirizzo != null and !#strings.isEmpty(e.indirizzo)}">
                  <i class="bi bi-pin-map"></i>
                  <span th:text="${e.indirizzo}">Indirizzo</span>
                </li>

              </ul>

              <div class="mt-auto d-flex align-items-center justify-content-between">
                <div class="price fw-semibold">
                  <i class="bi bi-currency-euro"></i>
                  <span th:text="${#numbers.formatDecimal(e.prezzo, 1, 'COMMA', 2, 'POINT')}">0,00</span>
                </div>
                <a class="btn btn-outline-dark btn-sm" th:href="@{|/eventi/${e.id}|}">
                  Dettagli <i class="bi bi-arrow-right-short"></i>
                </a>
              </div>
            </div>
          </article>
        </div>
      </div>

      <!-- Empty state -->
      <div class="text-center py-5 text-muted" th:if="${#lists.isEmpty(eventi)}">
        <i class="bi bi-emoji-frown fs-1 d-block mb-2"></i>
        Nessun evento trovato.
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer th:replace="~{fragments/footer :: footer}"></footer>

  <!-- JS Bootstrap -->
  <script th:src="@{/webjars/bootstrap/5.3.3/js/bootstrap.bundle.min.js}"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->
</body>

</html>