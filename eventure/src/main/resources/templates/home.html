<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">

<head>
  <meta charset="UTF-8" />
  <title th:text="${titoloPagina} ?: 'Eventure'">Eventure</title>

  <!-- Bootstrap CSS (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- CSS globali -->
  <link rel="stylesheet" th:href="@{/css/fonts.css}" />
  <link rel="stylesheet" th:href="@{/css/base.css}" />
  <link rel="stylesheet" th:href="@{/css/footer.css}" />

  <!-- CSS pagina home-->
  <link rel="stylesheet" th:href="@{/css/home.css}" />

  <!-- Bootstrap Icons (per le icone delle card) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Stile condiviso delle card (uguale a Eventi) -->
  <link rel="stylesheet" th:href="@{/css/cards.css}" />

</head>

<!-- Bootstrap JS bundle (necessario per autoplay + frecce) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


<body class="home">

  <!-- Header comune -->
  <header th:replace="~{fragments/header :: header_full}"></header>

  <main>
    <!-- HERO: immagine dâ€™impatto + logo + payoff -->
    <section class="impact">
      <figure class="impact__media">
        <img th:src="@{/img/hero.jpg}" alt="Persone che partecipano a un evento" />
      </figure>

      <div class="impact__overlay">
        <h1 class="impact__title">
          Un <em class="accent">nuovo</em> modo di vivere gli eventi
        </h1>
      </div>
    </section>

    <div class="container">

      <div th:if="${favOk}" class="alert alert-success alert-dismissible fade show mt-3" role="alert">
        <i class="bi bi-heart-fill"></i> Aggiunto ai preferiti
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Chiudi"></button>
      </div>


      <!-- ========== TOP 6 "EVENTI IN EVIDENZA" ========== -->
      <!-- ========== EVENTI IN EVIDENZA (3 per slide) ========== -->
      <section th:if="${featuredTop6 != null and !#lists.isEmpty(featuredTop6)}" class="section">
        <h2 class="section__title">Eventi in evidenza</h2>

        <div id="carouselFeatured" class="carousel slide carousel-multi" data-bs-ride="carousel"
          data-bs-interval="7000">
          <div class="carousel-inner">

            <!-- Una slide ogni gruppo di 3 -->
            <div class="carousel-item" th:each="i : ${#numbers.sequence(0, #lists.size(featuredTop6) - 1, 3)}"
              th:classappend="${i == 0} ? ' active'">
              <div class="slide-row d-flex justify-content-center gap-3">

                <!-- card 1 -->
                <div class="slide-item" th:if="${i < #lists.size(featuredTop6)}">
                  <th:block th:replace="~{fragments/event_cards :: event_banner(e=${featuredTop6[i]})}"></th:block>
                </div>

                <!-- card 2 -->
                <div class="slide-item" th:if="${i + 1 < #lists.size(featuredTop6)}">
                  <th:block th:replace="~{fragments/event_cards :: event_banner(e=${featuredTop6[i+1]})}"></th:block>
                </div>

                <!-- card 3 -->
                <div class="slide-item" th:if="${i + 2 < #lists.size(featuredTop6)}">
                  <th:block th:replace="~{fragments/event_cards :: event_banner(e=${featuredTop6[i+2]})}"></th:block>
                </div>

              </div>
            </div>
          </div>

          <!-- Frecce -->
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselFeatured" data-bs-slide="prev"
            aria-label="Precedente">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselFeatured" data-bs-slide="next"
            aria-label="Successivo">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
          </button>
        </div>
      </section>

      <!-- ========== TOP 9 ALTRI EVENTI (3 per slide) ========== -->
      <section th:if="${othersTop9 != null and !#lists.isEmpty(othersTop9)}" class="section">
        <div class="d-flex align-items-center justify-content-between mb-3 section__title-wrap">
          <h2 class="section__title m-0">Altri eventi</h2>
          <a th:href="@{/eventi}" class="link-secondary fw-semibold text-decoration-none see-all-link">
            Vedi tutti <i class="bi bi-arrow-right-short"></i>
          </a>
        </div>


        <div id="carouselOthers" class="carousel slide carousel-multi" data-bs-ride="carousel" data-bs-interval="7000">
          <div class="carousel-inner">

            <div class="carousel-item" th:each="i : ${#numbers.sequence(0, #lists.size(othersTop9) - 1, 3)}"
              th:classappend="${i == 0} ? ' active'">
              <div class="slide-row d-flex justify-content-center gap-3">

                <div class="slide-item" th:if="${i < #lists.size(othersTop9)}">
                  <th:block th:replace="~{fragments/event_cards :: event_card(e=${othersTop9[i]})}"></th:block>
                </div>

                <div class="slide-item" th:if="${i + 1 < #lists.size(othersTop9)}">
                  <th:block th:replace="~{fragments/event_cards :: event_card(e=${othersTop9[i+1]})}"></th:block>
                </div>

                <div class="slide-item" th:if="${i + 2 < #lists.size(othersTop9)}">
                  <th:block th:replace="~{fragments/event_cards :: event_card(e=${othersTop9[i+2]})}"></th:block>
                </div>

              </div>
            </div>

          </div>

          <button class="carousel-control-prev" type="button" data-bs-target="#carouselOthers" data-bs-slide="prev"
            aria-label="Precedente">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselOthers" data-bs-slide="next"
            aria-label="Successivo">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
          </button>
        </div>
      </section>







    </div>
  </main>

  <footer th:replace="~{fragments/footer :: footer}"></footer>
</body>

</html>