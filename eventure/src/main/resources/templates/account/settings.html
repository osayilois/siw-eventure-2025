<!doctype html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <title>Impostazioni account</title>
</head>

<body>
    <!-- HEADER Eventure -->
    <header>
        <a th:href="@{/home}" aria-label="Eventure Home"><strong>Eventure</strong></a>
        <nav>
            <a th:href="@{/eventi}">Eventi</a>
            <a th:href="@{/account}">Il mio profilo</a>
        </nav>
    </header>

    <h1>Impostazioni account</h1>

    <img th:src="@{/img/default-avatar.jpg}" alt="avatar" width="64" height="64">

    <div th:if="${success}" th:text="${success}"></div>
    <div th:if="${error}" th:text="${error}"></div>

    <section th:if="${me.provider == null or me.provider.name() == 'LOCAL'}">
        <h2>Cambia password</h2>
        <form th:action="@{/account/settings/password}" method="post">
            <label>Password attuale</label>
            <input type="password" name="oldPassword" required>
            <label>Nuova password</label>
            <input type="password" name="newPassword" required>
            <button type="submit">Aggiorna password</button>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>
    </section>

    <section th:if="${me.provider != null and me.provider.name() != 'LOCAL'}">
        <h2>Accesso con provider esterno</h2>
        <p>La password Ã¨ gestita dal tuo provider (<b th:text="${me.provider}">GOOGLE</b>).</p>
    </section>

    <section>
        <h2>Operazioni rischiose</h2>
        <form th:action="@{/account/settings/delete}" method="post"
            onsubmit="return confirm('Sei sicuro? Operazione irreversibile.');">
            <button type="submit">Elimina account</button>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>
    </section>
</body>

</html>